{% extends "base.html" %} {% block title %}Heatmap - NYC Crashes Analysis{%
endblock %} {% block content %}
<div class="section">
  <h1>Interactive Heatmap</h1>
  <p class="subtitle" style="color: var(--text-secondary); margin-bottom: 1.5rem">
    Geographic distribution of accidents. Filter by date, vehicle type, and borough.
  </p>

  <form method="get" class="card" style="padding: 1.5rem; margin-bottom: 1.5rem">
    <div class="form-grid">
      <div class="form-group">
        <label for="start_date">Start date</label>
        <input type="date" id="start_date" name="start_date" value="{{ start_date }}" />
      </div>
      <div class="form-group">
        <label for="end_date">End date</label>
        <input type="date" id="end_date" name="end_date" value="{{ end_date }}" />
      </div>
      <div class="form-group">
        <label for="vehicle_type">Vehicle type</label>
        <select id="vehicle_type" name="vehicle_type">
          <option value="">Any</option>
          {% for v in vehicle_options %}
          <option value="{{ v }}" {% if v == vehicle_type %}selected{% endif %}>{{ v }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group">
        <label for="borough">Borough</label>
        <select id="borough" name="borough">
          <option value="">Any</option>
          {% for b in borough_options %}
          <option value="{{ b }}" {% if b == borough %}selected{% endif %}>{{ b }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div style="margin-top: 1rem; display: flex; gap: 0.75rem; flex-wrap: wrap">
      <button type="submit" class="btn btn-primary">Update heatmap</button>
      <a href="{{ url_for('heatmap') }}" class="btn btn-secondary">Reset filters</a>
    </div>
  </form>

  <div
    style="
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    "
  >
    <iframe
      src="{{ heatmap_url }}"
      style="width: 100%; height: 600px; border: none"
      title="Heatmap"
    ></iframe>
  </div>

  <div style="margin-top: 2rem; text-align: center">
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Home</a>
  </div>
</div>
{% endblock %}
